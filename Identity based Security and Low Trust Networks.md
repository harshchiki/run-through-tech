# Identity-based Security and Low-trust Networks

# Reference
* <https://www.hashicorp.com/identity-based-security-and-low-trust-networks?utm_medium=ADV-PD&utm_source=LNKDIN&utm_campaign=21Q1_NA_LinkedInABMIdentityBasedSecurity_WHITEPPR&utm_cid=7011C000001OMcFQAW&utm_offer=WHITEPPR>


# Motivation
* As we transition to cloud, we move from a relatively static world of dedicated servers, static IP addresses, and a clear network perimeter to the cloud model, which has dynamic pools of compute capacity provisioned on demand, dynamic IP addresses, and no clear perimeter.
* For security teams, this model requires a fundamentally different approach: instead of focusing on a secure network perimeter and the assumption of network trust, the focus is to acknowledge that the network in cloud is inherently "low trust" and move to the idea of securing infrastructure and application services themselves.


# Identities and Vault
* Managing access to secrets in a hybrid world consists of two primary user types
  * Humans: 
    * need to permit or restrict access to create or manage secrets, or manage others who may have access, based on the identity (or identities) the user logged in with.
  * Machines: 
    * can include servers, virtual machines, applications, microservices, scripts, and more, all potentially needing access to different systems and secrets.
    * The ability to create dynamic secrets per service has several benefits â€” secrets can be short lived, specific secrets can be revoked in the event of a breach, and all actions are audited per secret. 
    * Each service is given access to secrets based on their identity and the policy associated with it. 
![image](https://user-images.githubusercontent.com/6420833/111270604-14404d80-8656-11eb-8535-9073cd616017.png)

# Managing Access with Identitied
* In (HashiCorp) Vault 0.9 (both Enterprise and OSS), Vault introduced a new means of managing access to secrets with our new Identity system. This system allows Vault to understand the identity of individual users and machines across different authentication methods.
* There are two fundamental components of the Identity system: 
  * (Identity) entities and 
  * (Identity) groups.

## (Identity) Entities:
* aggregated external identities that represent users and applications within Vault as a single, common identity. 
* Entities make it easier for teams and organizations to identify who someone is across a multitude of providers.
![image](https://user-images.githubusercontent.com/6420833/111271227-e7406a80-8656-11eb-8325-238382769d67.png)

## (Identity) Groups
* Identity Groups build on the concept Entities, in that Vaut allows teams to create and manage logical groupings of entities

# Identity and Access Management in Vault
* With Identity and Access Management (IAM) in Vault, users and organizations can map global access and policies to Vault Identity Entities and Groups.
* For example, let's say Alex is running an application in a Kubernetes container on Google Cloud that gets deployed from GitHub, connects to a database in Azure, and replicates to AWS. Alex can integrate his different cloud identities into an "Alex" entity and centrally create policies granting and restricting access to secrets for the different components to connect securely to one another, all within one workflow and API.

![image](https://user-images.githubusercontent.com/6420833/111271464-3a1a2200-8657-11eb-987e-826e255955e0.png)


# Custom Identity Authentication
* (Hashicorp) Vault should be able to work with any authentication method or secrets engine. 
* (Hashicorp) Vault has also created a secure plugin mechanism that enables easier and faster integration with any identity provider or Secrets engine or system through a custom plugin system.

# Example usecases all made possible by Hachicorp Vault
* A development team can leverage GitHub credentials to obtain short lived SSH credentials, allowing remote access to Linux servers.
* A Database administrator can obtain a set of read-only database credentials good for four hours, with multi-factor authentication enforced via the combination of their LDAP credentials and a one-time password generated by Google Authenticator application on their phone.
* A web developer group in Active Directory can obtain limited access to an AWS S3 bucket via AWS credentials only good for one hour.
* An organization would like to require either Okta or OpenLDAP authentication to obtain Google Compute Platform credentials good for seven days.
* After being acquired, employees from the company need to access secrets of the parent company leveraging the smaller company's directory server.

